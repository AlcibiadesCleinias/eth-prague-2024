specVersion: 0.0.8
description: Unstoppable Models Contract Subgraph
repository: https://github.com/fluencelabs/deal
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: UnstoppableModel
    network: local
    source:
      abi: UnstoppableModel
      address: "0x0B306BF915C4d645ff596e518fAf3F9669b97016"
      startBlock: 23
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - GraphNetwork
        - Token
        - LearningPeriod
        - ModelState
      abis:
        - name: UnstoppableModel
          file: ../out/UnstoppableModel.sol/UnstoppableModel.json
      eventHandlers:
#        - event: Initialized(uint8)
#          handler: handleInitialized
        - event: ApplyToLearnPeriod(indexed address,uint256,uint256,uint256)
          handler: handleApplyToLearnPeriod
        - event: SubmitState(indexed uint256,string,uint256)
          handler: handleSubmitState
        - event: SuspectState(indexed uint256,address,uint256)
          handler: handleSuspectState
        - event: WithdrawCollateralPerLearningPeriod(indexed uint256,address)
          handler: handleWithdrawCollateralPerLearningPeriod
#      blockHandlers:
#        - handler: handleNewBlock
      file: ./src/mappings/unstoppableModel.ts
